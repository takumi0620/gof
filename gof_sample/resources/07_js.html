<html><head><title>java sample code</title><meta http-equiv="Content-Type" content="text/html; charset=x-sjis"></head><body bgcolor=#ffffff text=#000000><img src="img/00/java.gif" hspace="10"><font style="margin-left:40px"><p><pre>import java.awt.*;import java.lang.Math;/* *  MyWindow * *  役割：&lt;Abstraction&gt; * *  C++ 版サンプルコードの Window クラスに相当する。Java AWT パッケージ *  に既に存在する Window クラスとの混同を避けるために MyWindow とした。 */public abstract class MyWindow {    public MyWindow(View contents) {        // ...        _contents = contents;    }    public abstract void drawContents();    public void open() {        //...    }    public void close() {        //...    }    public void iconify() {        //...    }    public void deiconify() {        //...    }    public void setOrigin(Point at) {        //...    }    public void setExtent(Point extent) {        //...    }    public void raise() {        //...    }    public void lower() {        //...    }    public void drawLine(Point p1, Point p2) {        //...    }    public void drawRect(Point p1, Point p2) {        MyWindowImp imp = getMyWindowImp();        imp.deviceRect(p1.x, p1.y, p2.x, p2.y);    }    public void drawPolygon(Point[] points) {        //...    }    public void drawText(String str, Point origin) {        //...    }    protected MyWindowImp getMyWindowImp() {        if (_imp == null) {            _imp = MyWindowSystemFactory.instance().makeMyWindowImp();        }        return _imp;    }    protected View getView() {        //...    }    private MyWindowImp _imp;    private View _contents; // ウィンドーの内容}/* *  MyWindowImp * *  役割：&lt;Implementor&gt; */public abstract class MyWindowImp {    public abstract void impTop();    public abstract void impBottom();    public abstract void impSetExtent(Point extent);    public abstract void impSetOrigin(Point at);    public abstract void deviceRect                    (float x0, float y0, float x1, float y1);    public abstract void deviceText(String s, float x, float y);    public abstract void deviceBitmap(String s, float x, float y);    // ...などの様々な描画用メソッド}/* *  ApplicationWindow * *  役割：&lt;RefinedAbstraction&gt; */public class ApplicationWindow extends MyWindow {    public ApplicationWindow(View contents) {        super(contents);        // ...    }    // ...    public void drawContents() {        getView().drawOn(this);    }}import java.awt.Point;/* *  IconWindow * *  役割：&lt;RefinedAbstraction&gt; */public class IconWindow extends MyWindow {    public IconWindow(View contents) {        super(contents);        // ...    }    // ...    public void drawContents() {        MyWindowImp imp = getMyWindowImp();        if (imp != null) {            imp.deviceBitmap(_bitmapName, (float)0.0, (float)0.0);        }    }    private String _bitmapName;}/* *  AWTWindowImp * *  役割：&lt;ConcreteImplementor&gt; * *  Java AWT (Abstract Windowing Toolkit) パッケージ用の *  &lt;ConcreteImplementor&gt; */public class AWTWindowImp extends MyWindowImp {    public AWTWindowImp() {        // ...    }    public void deviceRect(float x0, float y0, float x1, float y1) {        int x = Math.round(Math.min(x0, x1));        int y = Math.round(Math.min(y0, y1));        int w = Math.round(Math.abs(x0 - x1));        int h = Math.round(Math.abs(y0 - y1));        Graphics g = _frame.getGraphics();        g.drawRect(x, y, w, h);    }    // &lt;ConcreteImplementor&gt; インターフェースの残りの部分が続く...    /*     *  プライベートメンバ     */    // Java AWT 関連の諸々の状態。例えば：    private Frame _frame;}</pre><p></font></body></html>