<html><head><title>java sample code</title><meta http-equiv="Content-Type" content="text/html; charset=x-sjis"></head><body bgcolor=#ffffff text=#000000><img src="img/00/java.gif" hspace="10"><font style="margin-left:40px"><p>使用例：<p><pre>      Cabinet cabinet = new Cabinet("PC Cabinet");      Chassis chassis = new Chassis("PC Chassis");      cabinet.add(chassis);      Bus bus = new Bus("MCA Bus");      bus->add(new Card("16Mbps Token Ring");      chassis.add(bus);      chassis.add(new FloppyDisk("3.5in Floppy"));      System.out.println("価格合計: " + chassis.netPrice().toString());</pre><hr><pre>import java.util.Enumeration;/* *  Equipment * *  役割：&lt;Component&gt; */public abstract class Equipment {    public Equipment(String name) {        _name = name;    }    String name() { return _name; }    /*     *  &lt;Component&gt; の具象サブクラスが実装するインターフェース     */    public abstract Watt power();    public abstract Currency netPrice();    public abstract Currency discountPrice();    /*     *  &lt;Composite&gt; クラスが実装するインターフェース     */    public void add(Equipment equipment) { }    public void remove(Equipment equipment) { }    public Enumeration createEnumeration() {        // &lt;Leaf&gt; は自身のみを巡回先に含む iterator を返すよう        // 実装してもよい。        //        // NullEnumeration は Iterator サンプルコード(Java）        // に収録。        return new NullEnumeration();    }    /*     *  プライベートメンバ     */    private String _name;}/* *  FloppyDisk * *  役割：&lt;Leaf&gt; */public class FloppyDisk extends Equipment {    public FloppyDisk(String name) {        super(name);        // ...    }    public Watt power() {        // ...    }    public Currency netPrice() {        // ...    }    public Currency discountPrice() {        // ...    }}/* *  Card * *  役割：&lt;Leaf&gt; */public class Card extends Equipment {    public Card(String name) {        super(name);        // ...    }    public Watt power() {        // ...    }    public Currency netPrice() {        // ...    }    public Currency discountPrice() {        // ...    }}import java.util.Vector;/* *  CompositeEquipment * *  役割：&lt;Composite&gt; */public class CompositeEquipment extends Equipment {    public CompositeEquipment(String name) {        super(name);        // ...    }    public Watt power() {        // ...    }    public Currency netPrice() {        Enumeration i = createEnumeration();        Currency total = Currency.ZERO;        while (i.hasMoreElements()) {            total.add(((Equipment)i.nextElement()).netPrice());        }        return total;    }    public Currency discountPrice() {        // ...    }    public void add(Equipment equipment) {        _equipment.addElement(equipment);    }    public void remove(Equipment equipment) {        _equipment.removeElement(equipment);    }    public Enumeration createEnumeration() {        // concrete iterator を作成する    }    private Vector _equipment;}/* *  Chassis * *  役割：&lt;Composite&gt; */public class Chassis extends CompositeEquipment {    // ...}/* *  Cabinet * *  役割：&lt;Composite&gt; */public class Cabinet extends CompositeEquipment {    // ...}/* *  Bus * *  役割：&lt;Composite&gt; */public class Bus extends CompositeEquipment {    // ...}</pre><p></font></body></html>