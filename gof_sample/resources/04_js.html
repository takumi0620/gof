<html><head><title>java sample code</title><meta http-equiv="Content-Type" content="text/html; charset=x-sjis"></head><body bgcolor=#ffffff text=#000000><img src="img/00/java.gif" hspace="10"><font style="margin-left:40px"><p><pre>/* *  MazePrototypeFactory * *  役割：&lt;Client&gt;/Prototype, &lt;ConcreteFactory&gt;/Abstract Factory */public class MazePrototypeFactory extends MazeFactory {    public MazePrototypeFactory(Maze m, Wall w, Room r, Door d) {        _prototypeMaze = m;        _prototypeWall = w;        _prototypeRoom = r;        _prototypeDoor = d;    }    public Maze makeMaze() {        // ...    }    public Room makeRoom(int n) {        Room room = (Room)_prototypeRoom.clone();        room.initialize(n);        return room;    }    public Wall makeWall() {        return (Wall)_prototypeWall.clone();    }    public Door makeDoor(Room r1, Room r2) {        Door door = (Door)_prototypeDoor.clone();        door.initialize(r1, r2);        return door;    }    private Maze _prototypeMaze;    private Wall _prototypeWall;    private Room _prototypeRoom;    private Door _prototypeDoor;}/* *  Door * *  役割：&lt;ConcretePrototype&gt;/Prototype, *  　　　&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt;/Abstract Factory */public class Door implements MapSite {    /*     *  コンストラクタ     */    public Door() {        _room1 = null;        _room2 = null;        // ...    }    /*     *  &lt;ConcretePrototype&gt; インターフェース     */    public void initialize(Room r1, Room r2) {        _room1 = r1;        _room2 = r2;    }    // clone メソッドは java.lang.Object に予め定義されている。Java では    // java.lang.Cloneable を実装するクラスは、clone メソッドを使って    // インスタンスを複製することができる。    /*     *  &lt;ConcreteProduct&gt;/Abstract Factory インターフェース     */    public void enter() {        // ...    }    // この &lt;ConcreteProduct&gt; 独自のインターフェース    public Room otherSideFrom(Room aRoom) {        // ...    }    /*     *  プライベートメンバ     */    private Room _room1;    private Room _room2;}/* *  BombedWall * *  役割：&lt;ConcretePrototype&gt;/Prototype, &lt;ConcreteProduct&gt;/Abstract Factory */public class BombedWall extends Wall {    /*     *  コンストラクタ     */    public BombedWall() {        _bomb = false; // デフォルト値をセット        // ....    }    /*     *  &lt;ConcretePrototype&gt; インターフェース     */    public void initialize(Room r1, Room r2, boolean hasBomb) {        initialize(r1, r2);        _bomb = hasBomb;    }    /*     *  &lt;ConcreteProduct&gt;/Abstract Factory インターフェース     */    // この &lt;ConcreteProduct&gt; 独自のインターフェース    public boolean hasBomb() {        return _bomb;    }    /*     *  プライベートメンバ     */    private boolean _bomb;}/* *  MapSite * *  役割：（Room, Wall, Door の抽象クラス） *  　　　&lt;Prototype&gt;/Prototype */public interface MapSite extends java.lang.Cloneable {    public static final int NORTH = 0;    public static final int SOUTH = 1;    public static final int EAST = 2;    public static final int WEST = 3;    public void enter();}</pre><p></font></body></html>