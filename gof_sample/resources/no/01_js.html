<html><head><title>java sample code</title><meta http-equiv="Content-Type" content="text/html; charset=x-sjis"></head><body bgcolor=#ffffff text=#000000><img src="img/00/java.gif" hspace="10"><font style="margin-left:40px"><p><pre>/* *  MazeFactory * *  役割：&lt;AbstractFactory&gt;&lt;ConcreteFactory&gt; */public class MazeFactory {    /*     *  &lt;AbstractFactory&gt;&lt;ConcreteFactory&gt; インターフェース     */    // &lt;AbstractProduct&gt;&lt;ConcreteProduct&gt; 作成メソッド    public Maze makeMaze()        { return new Maze(); }    public Wall makeWall()        { return new Wall(); }    public Room makeRoom(int n)        { return new Room(n); }    public Door makeDoor(Room r1, Room r2)        { return new Door(r1, r2); }}/* *  EnchantedMazeFactory * *  役割：&lt;ConcreteFactory&gt; */public class EnchantedMazeFactory extends MazeFactory {    /*     *  コンストラクタ     */    public EnchantedMazeFactory() {        // ...    }    /*     *  &lt;ConcreteFactory&gt; インターフェース     */    // &lt;ConcreteProduct&gt; 作成メソッド    public Room makeRoom(int n)        { return new EnchantedRoom(n, castSpell()); }    public Door makeDoor(Room r1, Room r2)        { return new DoorNeedingSpell(r1, r2); }    /*     *  プライベートメンバ     */    protected Spell castSpell() {        // ...    }}/* *  BombedMazeFactory * *  役割：&lt;ConcreteFactory&gt; * *  爆弾の仕掛けられた迷路を作るには、createMaze メソッドに *  BombedMazeFactory オブジェクトを渡す： * *      MazeGame game = new MazeGame(); *      BombedMazeFactory factory = new BombedMazeFactory(); * *      game.createMaze(factory); */public class BombedMazeFactory extends MazeFactory {    /*     *  &lt;ConcreteFactory&gt; インターフェース     */    // &lt;ConcreteProduct&gt; 作成メソッド    public Wall makeWall()        { return new BombedWall(); }    public Room makeRoom(int n)        { return new RoomWithABomb(n); }}/* *  DoorNeedingSpell * *  役割：&lt;ConcreteProduct&gt; */public class DoorNeedingSpell extends Door {    public DoorNeedingSpell(Room r1, Room r2) {        super(r1, r2);        // ...    }    // ...}/* *  BombedWall * *  役割：&lt;ConcreteProduct&gt; */public class BombedWall extends Wall {    public BombedWall() {        // ...    }    // ...}/* *  RoomWithABomb * *  役割：&lt;ConcreteProduct&gt; */public class RoomWithABomb extends Room {    public RoomWithABomb(int n) {        super(n);        // ...    }    // ...}/* *  MapSite * *  役割：（Room, Wall, Door の抽象クラス） */public interface MapSite {    public static final int NORTH = 0;    public static final int SOUTH = 1;    public static final int EAST = 2;    public static final int WEST = 3;    public void enter();}/* *  Room * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt; */public class Room implements MapSite {    public Room(int roomNo)        { _roomNumber = roomNo; }    public MapSite getSide(int aDirection) {        return _sides[aDirection];    }    public void setSide(int aDirection, MapSite aMapSite) {        _sides[aDirection] = aMapSite;    }    public void enter() {        // ...    }    private int _roomNumber;    private MapSite _sides[] = new MapSite[4];}/* *  Wall * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt; */public class Wall implements MapSite {    public Wall() {        // ...    }    public void enter() {        // ...    }}/* *  Door * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt; */public class Door implements MapSite {    public Door(Room r1, Room r2) {        _room1 = r1;        _room2 = r2;    }    public void enter() {        // ...    }    public Room otherSideFrom(Room  aRoom) {        // ...    }    private Room _room1 = null;    private Room _room2 = null;    private boolean _isOpen;}/* *  Maze * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt; */public class Maze {    public Maze() {        // ...    }    public void addRoom(Room aRoom) {        // ...    }    public Room roomNo(int n) {        // ...    }}/* *  MazeGame * *  役割：&lt;Client&gt;/Abstract Factory */public class MazeGame {    public Maze createMaze() {        Maze aMaze = new Maze();        Room r1 = new Room(1);        Room r2 = new Room(2);        Door theDoor = new Door(r1, r2);        aMaze.addRoom(r1);        aMaze.addRoom(r2);        r1.setSide(MapSite.NORTH, new Wall());        r1.setSide(MapSite.EAST, theDoor);        r1.setSide(MapSite.SOUTH, new Wall());        r1.setSide(MapSite.WEST, new Wall());        r2.setSide(MapSite.NORTH, new Wall());        r2.setSide(MapSite.EAST, new Wall());        r2.setSide(MapSite.SOUTH, new Wall());        r2.setSide(MapSite.WEST, theDoor);        return aMaze;    }    /*     *  &lt;Client&gt;/Abstract Factory インターフェース     */    public Maze createMaze(MazeFactory factory) {        Maze aMaze = factory.makeMaze();        Room r1 = factory.makeRoom(1);        Room r2 = factory.makeRoom(2);        Door aDoor = factory.makeDoor(r1, r2);        aMaze.addRoom(r1);        aMaze.addRoom(r2);        r1.setSide(MapSite.NORTH, factory.makeWall());        r1.setSide(MapSite.EAST, aDoor);        r1.setSide(MapSite.SOUTH, factory.makeWall());        r1.setSide(MapSite.WEST, factory.makeWall());        r2.setSide(MapSite.NORTH, factory.makeWall());        r2.setSide(MapSite.EAST, factory.makeWall());        r2.setSide(MapSite.SOUTH, factory.makeWall());        r2.setSide(MapSite.WEST, aDoor);        return aMaze;    }    // ...}</pre><p></font></body></html>