<html><head><title>java sample code</title><meta http-equiv="Content-Type" content="text/html; charset=x-sjis"></head><body bgcolor=#ffffff text=#000000><img src="img/00/java.gif" hspace="10"><font style="margin-left:40px"><p><pre>/* *  Graphic * *  グラフィックエディタで、グラフィックオブジェクトのベースとなるクラス * */public class Graphic {    // ...}import java.awt.Dimension;/* *  MoveCommand * *  役割：&lt;Caretaker&gt;/Memento, &lt;ConcreteCommand&gt;/Command */public class MoveCommand {    public MoveCommand(Graphic target, Dimension delta) {        // ...    }    /*     *  &lt;ConcreteCommand&gt;/Command インターフェース     */    public void execute() {        ConstraintSolver solver = ConstraintSolver.instance();        _state = solver.createMemento(); // memento を作る        _target.move(_delta);        solver.solve();    }    public void unexecute() {        ConstraintSolver solver = ConstraintSolver.instance();        _target.move(new Dimension(-_delta.width, -_delta.height));        solver.setMemento(_state); // solver の状態を戻す        solver.solve();    }    private ConstraintSolverMemento _state;    private Dimension _delta;    private Graphic _target;}/* *  ConstraintSolver * *  役割：&lt;Originator&gt;/Memento, &lt;Singleton&gt;/Singleton */public class ConstraintSolver {    /*     *  &lt;Singleton&gt;/Singleton インターフェース     */    public static ConstraintSolver instance() {        // ...    }    /*     *  ConstraintSolver 独自のインターフェース     */    public void solve() {        // ...    }    public void addConstraint(Graphic startConnection,                                     Graphic endConnection) {        // ...    }    public void removeConstraint(Graphic startConnection,                                     Graphic endConnection) {        // ...    }    /*     *  &lt;Originator&gt;/Memento インターフェース     */    public ConstraintSolverMemento createMemento() {        // ...    }    public void setMemento(ConstraintSolverMemento state) {        // ...    }    /*     *  プライベートメンバ     *     *  結線規則を適用するための操作や表に現れない状態のためのメンバ     */}/* *  ConstraintSolverMemento * *  役割：&lt;Memento&gt; */public class ConstraintSolverMemento {    public ConstraintSolverMemento() {        // ...    }    /*     *  &lt;Memento&gt; インターフェース     *     *  ConstraintSolver の状態を取得したり読み出させたりする     *  ためのインターフェース     */    /*     *  プライベートメンバ     *     *  ConstraintSolver の状態保持     */}</pre><p></font></body></html>