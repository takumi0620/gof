<html><head><title>java sample code</title><meta http-equiv="Content-Type" content="text/html; charset=x-sjis"></head><body bgcolor=#ffffff text=#000000><img src="img/00/java.gif" hspace="10"><font style="margin-left:40px"><p><font style="text-indent:10pt">　C++ 版サンプルコードの Character クラスは、Java 版サンプルコードでは CharacterGlyph クラスとして定義される。</font><p><hr><pre>import java.awt.Window;import java.awt.Font;/* *  Glyph * *  役割：&lt;Flyweight&gt; */public abstract class Glyph {    public abstract void draw(Window w, GlyphContext gc);    public abstract void setFont(Font f, GlyphContext gc);    public abstract Font getFont(GlyphContext gc);    public abstract void first(GlyphContext gc);    public abstract void next(GlyphContext gc);    public abstract void isDone(GlyphContext gc);    public abstract Glyph current(GlyphContext gc);    public abstract void insert(Glyph g, GlyphContext gc);    public abstract void remove(GlyphContext gc);}/* *  CharacterGlyph * *  役割：&lt;ConcreteFlyweight&gt; */public class CharacterGlyph extends Glyph {    public CharacterGlyph(char c) {        // ...    }    public void draw(Window w, GlyphContext gc) {        // ...    }    // ...    private char _charcode;}/* *  GlyphContext * *  役割：&lt;extrinsic state&gt; */public class GlyphContext {    static final int DEFAULTSTEP = 1;    static final int DEFAULTQUANTITY = 1;    static final int DEFAULTSPAN = 1;    public GlyphContext() {        // ...    }    public void next(int step) {        // ...    }    public void insert(int quantity) {        // ...    }    public Font getFont() {        // ...    }    public void setFont(Font f, int span) {        // ...    }    private int _index;    private BTree _fonts;}/* *  GlyphFactory * *  役割：&lt;FlyweightFactory&gt; */public class GlyphFactory {    static final int NCHARCODES = 65536;  // Unicode 2.0 のコードは 16 ビット    public GlyphFactory() {}    public CharacterGlyph createCharacter(char c) {        if (_character[Character.getNumericValue(c)] == null) {            _character[Character.getNumericValue(c)] = new CharacterGlyph(c);        }        return _character[Character.getNumericValue(c)];    }    public Row createRow() {        return new Row();    }    public Column createColumn() {        return new Column();    }    private CharacterGlyph _character[] = new CharacterGlyph[NCHARCODES];}</pre><p></font></body></html>