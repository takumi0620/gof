<html><head><title>java sample code</title><meta http-equiv="Content-Type" content="text/html; charset=x-sjis"></head><body bgcolor=#ffffff text=#000000><img src="img/00/java.gif" hspace="10"><font style="margin-left:40px"><p><pre>/* *  MazeFactory * *  役割：&lt;Singleton&gt;/Singleton,  *        &lt;AbstractFactory&gt;&lt;ConcreteFactory&gt;/Abstract Factory */public class MazeFactory {    /*     *  コンストラクタ     */    public MazeFactory() {        _instance = null;    }    /*     *  &lt;Singleton&gt; インターフェース     */    public static MazeFactory instance() {        if (_instance == null) {            String mazeStyle = System.getProperty("mazegame.maze.style");            if (mazeStyle.equals("bombed")) {                _instance = new BombedMazeFactory();            } else if (mazeStyle.equals("enchanted")) {                _instance = new EnchantedMazeFactory();            // ... その他の MazeFactory のサブクラス            } else {    // デフォルト                _instance = new MazeFactory();            }        }        return _instance;    }    /*     *  &lt;AbstractFactory&gt;&lt;ConcreteFactory&gt; インターフェース     */    // &lt;AbstractProduct&gt;&lt;ConcreteProduct&gt; 作成メソッド    public Maze makeMaze()        { return new Maze(); }    public Wall makeWall()        { return new Wall(); }    public Room makeRoom(int n)        { return new Room(n); }    public Door makeDoor(Room r1, Room r2)        { return new Door(r1, r2); }    /*     *  プライベートメンバ     */    private static MazeFactory _instance;}/* *  MapSite * *  役割：（Room, Wall, Door の抽象クラス） */public interface MapSite {    public static final int NORTH = 0;    public static final int SOUTH = 1;    public static final int EAST = 2;    public static final int WEST = 3;    public void enter();}/* *  Room * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt;/AbstractFactory */public class Room implements MapSite {    public Room(int roomNo)        { _roomNumber = roomNo; }    public MapSite getSide(int aDirection) {        return _sides[aDirection];    }    public void setSide(int aDirection, MapSite aMapSite) {        _sides[aDirection] = aMapSite;    }    public void enter() {        // ...    }    private int _roomNumber;    private MapSite[] _sides = new MapSite[4];}/* *  Wall * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt;/AbstractFactory */public class Wall implements MapSite {    public Wall() {        // ...    }    public void enter() {        // ...    }}/* *  Door * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt;/AbstractFactory */public class Door implements MapSite {    public Door(Room r1, Room r2) {        _room1 = r1;        _room2 = r2;    }    public void enter() {        // ...    }    Room otherSideFrom(Room aRoom) {        // ...    }    private Room _room1 = null;    private Room _room2 = null;    private boolean _isOpen;}/* *  Maze * *  役割：&lt;ConcreteProduct&gt;&lt;AbstractProduct&gt;/AbstractFactory */public class Maze {    public Maze() {        // ...    }    public void addRoom(Room aRoom) {        // ...    }    public Room roomNo(int n) {        // ...    }}</pre><p></font></body></html>